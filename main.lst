


ARM Macro Assembler    Page 1 


    1 00000000         ;****************** main.s ***************
    2 00000000         ; Program written by: ***Your Names**update this***
    3 00000000         ; Date Created: 2/4/2017
    4 00000000         ; Last Modified: 8/24/2018
    5 00000000         ; Brief description of the program
    6 00000000         ;   The LED toggles at 2 Hz and a varying duty-cycle
    7 00000000         ; Hardware connections (External: One button and one LED
                       )
    8 00000000         ;  PE2 is Button input  (1 means pressed, 0 means not pr
                       essed)
    9 00000000         ;  PE3 is LED output (1 activates external LED on protob
                       oard)
   10 00000000         ;  PF4 is builtin button SW1 on Launchpad (Internal) 
   11 00000000         ;        Negative Logic (0 means pressed, 1 means not pr
                       essed)
   12 00000000         ; Overall functionality of this system is to operate lik
                       e this
   13 00000000         ;   1) Make PE3 an output and make PE2 and PF4 inputs.
   14 00000000         ;   2) The system starts with the the LED toggling at 2H
                       z,
   15 00000000         ;      which is 2 times per second with a duty-cycle of 
                       30%.
   16 00000000         ;      Therefore, the LED is ON for 150ms and off for 35
                       0 ms.
   17 00000000         ;   3) When the button (PE2) is pressed-and-released inc
                       rease
   18 00000000         ;      the duty cycle by 20% (modulo 100%). Therefore fo
                       r each
   19 00000000         ;      press-and-release the duty cycle changes from 30%
                        to 70% to 70%
   20 00000000         ;      to 90% to 10% to 30% so on
   21 00000000         ;   4) Implement a "breathing LED" when SW1 (PF4) on the
                        Launchpad is pressed:
   22 00000000         ;      a) Be creative and play around with what "breathi
                       ng" means.
   23 00000000         ;         An example of "breathing" is most computers po
                       wer LED in sleep mode
   24 00000000         ;         (e.g., https://www.youtube.com/watch?v=ZT6siXy
                       IjvQ).
   25 00000000         ;      b) When (PF4) is released while in breathing mode
                       , resume blinking at 2Hz.
   26 00000000         ;         The duty cycle can either match the most recen
                       t duty-
   27 00000000         ;         cycle or reset to 30%.
   28 00000000         ;      TIP: debugging the breathing LED algorithm using 
                       the real board.
   29 00000000         ; PortE device registers
   30 00000000 400243FC 
                       GPIO_PORTE_DATA_R
                               EQU              0x400243FC
   31 00000000 40024400 
                       GPIO_PORTE_DIR_R
                               EQU              0x40024400
   32 00000000 40024420 
                       GPIO_PORTE_AFSEL_R
                               EQU              0x40024420
   33 00000000 4002451C 
                       GPIO_PORTE_DEN_R
                               EQU              0x4002451C



ARM Macro Assembler    Page 2 


   34 00000000         ; PortF device registers
   35 00000000 400253FC 
                       GPIO_PORTF_DATA_R
                               EQU              0x400253FC
   36 00000000 40025400 
                       GPIO_PORTF_DIR_R
                               EQU              0x40025400
   37 00000000 40025420 
                       GPIO_PORTF_AFSEL_R
                               EQU              0x40025420
   38 00000000 40025510 
                       GPIO_PORTF_PUR_R
                               EQU              0x40025510
   39 00000000 4002551C 
                       GPIO_PORTF_DEN_R
                               EQU              0x4002551C
   40 00000000 40025520 
                       GPIO_PORTF_LOCK_R
                               EQU              0x40025520
   41 00000000 40025524 
                       GPIO_PORTF_CR_R
                               EQU              0x40025524
   42 00000000 4C4F434B 
                       GPIO_LOCK_KEY
                               EQU              0x4C4F434B  ; Unlocks the GPIO_
                                                            CR register
   43 00000000 400FE608 
                       SYSCTL_RCGCGPIO_R
                               EQU              0x400FE608
   44 00000000         
   45 00000000 000F0886 
                       DUTY_10 EQU              0x000F0886  ;ON for 50ms
   46 00000000 002D1991 
                       DUTY_30 EQU              0x002D1991  ;ON for 150ms
   47 00000000 004B2A9C 
                       DUTY_50 EQU              0x004B2A9C  ;ON for 250ms
   48 00000000 00693BA8 
                       DUTY_70 EQU              0x00693BA8  ;ON for 350ms
   49 00000000 00874CB3 
                       DUTY_90 EQU              0x00874CB3  ;ON for 450ms
   50 00000000         
   51 00000000                 IMPORT           TExaS_Init
   52 00000000                 THUMB
   53 00000000                 AREA             DATA, ALIGN=2
   54 00000000         ;global variables go here
   55 00000000         
   56 00000000         
   57 00000000                 AREA             |.text|, CODE, READONLY, ALIGN=
2
   58 00000000                 THUMB
   59 00000000                 EXPORT           Start
   60 00000000         Start
   61 00000000         ; TExaS_Init sets bus clock at 80 MHz
   62 00000000 F7FF FFFE       BL               TExaS_Init  ; voltmeter, scope 
                                                            on PD3
   63 00000004         ; Initialization goes here
   64 00000004         
   65 00000004 493C            LDR              R1, =SYSCTL_RCGCGPIO_R ;clock
   66 00000006 6808            LDR              R0, [R1]



ARM Macro Assembler    Page 3 


   67 00000008 F040 0030       ORR              R0, R0, #0x30 ;setting bit 4 fo
                                                            r port E
   68 0000000C 6008            STR              R0, [R1]    ;storing to clock
   69 0000000E BF00            NOP                          ;delay for clock
   70 00000010 BF00            NOP
   71 00000012         
   72 00000012 493A            LDR              R1, =GPIO_PORTE_DIR_R
   73 00000014 F020 000C       BIC              R0, #0X0C
   74 00000018 F040 0008       ORR              R0, #0X08   ;0 input 1 output p
                                                            e3 output 
   75 0000001C 6008            STR              R0, [R1]
   76 0000001E         
   77 0000001E 4938            LDR              R1, =GPIO_PORTE_DEN_R
   78 00000020 F020 000C       BIC              R0, #0x0C
   79 00000024 F040 000C       ORR              R0, #0X0C
   80 00000028 6008            STR              R0, [R1]
   81 0000002A         
   82 0000002A B662            CPSIE            I           ; TExaS voltmeter, 
                                                            scope runs on inter
                                                            rupts
   83 0000002C         loop
   84 0000002C         ; main engine goes here
   85 0000002C         
   86 0000002C         
   87 0000002C         
   88 0000002C 4835    next    LDR              R0, =DUTY_70 ;OFF Delay, in ms
   89 0000002E F000 F849       BL               Delay
   90 00000032 F000 F84A       BL               Toggle
   91 00000036 4834            LDR              R0, =DUTY_30 ;ON Delay, in ms
   92 00000038 F000 F844       BL               Delay
   93 0000003C F000 F845       BL               Toggle
   94 00000040 F001 0204       AND              R2, R1, #0x04
   95 00000044 2A00            CMP              R2, #0
   96 00000046 D0F1            BEQ              next
   97 00000048 F000 F845       BL               Loop1
   98 0000004C         
   99 0000004C 482F    next1   LDR              R0, =DUTY_50 ;ON & OFF Delay, i
                                                            n ms
  100 0000004E F000 F839       BL               Delay
  101 00000052 F000 F83A       BL               Toggle
  102 00000056 F001 0204       AND              R2, R1, #0x04
  103 0000005A 2A00            CMP              R2, #0x00
  104 0000005C D0F6            BEQ              next1
  105 0000005E F000 F83A       BL               Loop1
  106 00000062         
  107 00000062 4829    next2   LDR              R0, =DUTY_30 ;OFF Delay, in ms
  108 00000064 F000 F82E       BL               Delay
  109 00000068 F000 F82F       BL               Toggle
  110 0000006C 4825            LDR              R0, =DUTY_70 ;ON Delay, in ms
  111 0000006E F000 F829       BL               Delay
  112 00000072 F000 F82A       BL               Toggle
  113 00000076 F001 0204       AND              R2, R1, #0x04
  114 0000007A 2A00            CMP              R2, #0
  115 0000007C D0F1            BEQ              next2
  116 0000007E F000 F82A       BL               Loop1
  117 00000082         
  118 00000082 4823    next3   LDR              R0, =DUTY_10 ;OFF Delay, in ms
  119 00000084 F000 F81E       BL               Delay
  120 00000088 F000 F81F       BL               Toggle



ARM Macro Assembler    Page 4 


  121 0000008C 4821            LDR              R0, =DUTY_90 ;ON Delay, in ms
  122 0000008E F000 F819       BL               Delay
  123 00000092 F000 F81A       BL               Toggle
  124 00000096 F001 0204       AND              R2, R1, #0x04
  125 0000009A 2A00            CMP              R2, #0
  126 0000009C D0F1            BEQ              next3
  127 0000009E F000 F81A       BL               Loop1
  128 000000A2         
  129 000000A2 481C    next4   LDR              R0, =DUTY_90 ;OFF Delay, in ms
  130 000000A4 F000 F80E       BL               Delay
  131 000000A8 F000 F80F       BL               Toggle
  132 000000AC 4818            LDR              R0, =DUTY_10 ;ON Delay, in ms
  133 000000AE F000 F809       BL               Delay
  134 000000B2 F000 F80A       BL               Toggle
  135 000000B6 F001 0204       AND              R2, R1, #0x04
  136 000000BA 2A00            CMP              R2, #0
  137 000000BC D0F1            BEQ              next4
  138 000000BE F000 F80A       BL               Loop1
  139 000000C2         
  140 000000C2 E7B3            B                loop
  141 000000C4         
  142 000000C4         Delay
  143 000000C4 1E40    wait    SUBS             R0, R0, #1
  144 000000C6 D1FD            BNE              wait
  145 000000C8 4770            BX               LR
  146 000000CA         
  147 000000CA         Toggle
  148 000000CA 4813            LDR              R0, =GPIO_PORTE_DATA_R 
                                                            ;Toggle LED at PE3
  149 000000CC 6801            LDR              R1, [R0]
  150 000000CE F081 0108       EOR              R1, #0x08
  151 000000D2 6001            STR              R1, [R0]
  152 000000D4 4770            BX               LR
  153 000000D6         
  154 000000D6         Loop1
  155 000000D6 4810            LDR              R0, =GPIO_PORTE_DATA_R 
                                                            ;Toggle LED at PE3
  156 000000D8 B510            PUSH             {LR, R4}
  157 000000DA F000 F808       BL               LED_Off
  158 000000DE E8BD 4010       POP              {LR, R4}
  159 000000E2 6801            LDR              R1, [R0]
  160 000000E4 F001 0204       AND              R2, R1, #0x04
  161 000000E8 2A00            CMP              R2, #0
  162 000000EA D1F4            BNE              Loop1
  163 000000EC 4770            BX               LR
  164 000000EE         
  165 000000EE         LED_Off
  166 000000EE 6801            LDR              R1, [R0]
  167 000000F0 F021 0108       BIC              R1, #0x08
  168 000000F4 6001            STR              R1, [R0]
  169 000000F6 4770            BX               LR
  170 000000F8         
  171 000000F8                 ALIGN                        ; make sure the end
                                                             of this section is
                                                             aligned
  172 000000F8                 END                          ; end of file
              400FE608 
              40024400 
              4002451C 



ARM Macro Assembler    Page 5 


              00693BA8 
              002D1991 
              004B2A9C 
              000F0886 
              00874CB3 
              400243FC 
Command Line: --debug --xref --diag_suppress=9931 --cpu=Cortex-M4 --apcs=interw
ork --depend=.\main.d -o.\main.o -I.\RTE\_Lab3 -IC:\Keil_v5\ARM\PACK\ARM\CMSIS\
5.3.0\CMSIS\Include -IC:\Keil_v5\ARM\PACK\Keil\TM4C_DFP\1.1.0\Device\Include\TM
4C123 --predefine="__EVAL SETA 1" --predefine="__UVISION_VERSION SETA 525" --pr
edefine="_RTE_ SETA 1" --predefine="TM4C123GH6PM SETA 1" --list=.\main.lst main
.s



ARM Macro Assembler    Page 1 Alphabetic symbol ordering
Relocatable symbols

DATA 00000000

Symbol: DATA
   Definitions
      At line 53 in file main.s
   Uses
      None
Comment: DATA unused
1 symbol



ARM Macro Assembler    Page 1 Alphabetic symbol ordering
Relocatable symbols

.text 00000000

Symbol: .text
   Definitions
      At line 57 in file main.s
   Uses
      None
Comment: .text unused
Delay 000000C4

Symbol: Delay
   Definitions
      At line 142 in file main.s
   Uses
      At line 89 in file main.s
      At line 92 in file main.s
      At line 100 in file main.s
      At line 108 in file main.s
      At line 111 in file main.s
      At line 119 in file main.s
      At line 122 in file main.s
      At line 130 in file main.s
      At line 133 in file main.s

LED_Off 000000EE

Symbol: LED_Off
   Definitions
      At line 165 in file main.s
   Uses
      At line 157 in file main.s
Comment: LED_Off used once
Loop1 000000D6

Symbol: Loop1
   Definitions
      At line 154 in file main.s
   Uses
      At line 97 in file main.s
      At line 105 in file main.s
      At line 116 in file main.s
      At line 127 in file main.s
      At line 138 in file main.s
      At line 162 in file main.s

Start 00000000

Symbol: Start
   Definitions
      At line 60 in file main.s
   Uses
      At line 59 in file main.s
Comment: Start used once
Toggle 000000CA

Symbol: Toggle
   Definitions
      At line 147 in file main.s
   Uses



ARM Macro Assembler    Page 2 Alphabetic symbol ordering
Relocatable symbols

      At line 90 in file main.s
      At line 93 in file main.s
      At line 101 in file main.s
      At line 109 in file main.s
      At line 112 in file main.s
      At line 120 in file main.s
      At line 123 in file main.s
      At line 131 in file main.s
      At line 134 in file main.s

loop 0000002C

Symbol: loop
   Definitions
      At line 83 in file main.s
   Uses
      At line 140 in file main.s
Comment: loop used once
next 0000002C

Symbol: next
   Definitions
      At line 88 in file main.s
   Uses
      At line 96 in file main.s
Comment: next used once
next1 0000004C

Symbol: next1
   Definitions
      At line 99 in file main.s
   Uses
      At line 104 in file main.s
Comment: next1 used once
next2 00000062

Symbol: next2
   Definitions
      At line 107 in file main.s
   Uses
      At line 115 in file main.s
Comment: next2 used once
next3 00000082

Symbol: next3
   Definitions
      At line 118 in file main.s
   Uses
      At line 126 in file main.s
Comment: next3 used once
next4 000000A2

Symbol: next4
   Definitions
      At line 129 in file main.s
   Uses
      At line 137 in file main.s
Comment: next4 used once
wait 000000C4



ARM Macro Assembler    Page 3 Alphabetic symbol ordering
Relocatable symbols


Symbol: wait
   Definitions
      At line 143 in file main.s
   Uses
      At line 144 in file main.s
Comment: wait used once
13 symbols



ARM Macro Assembler    Page 1 Alphabetic symbol ordering
Absolute symbols

DUTY_10 000F0886

Symbol: DUTY_10
   Definitions
      At line 45 in file main.s
   Uses
      At line 118 in file main.s
      At line 132 in file main.s

DUTY_30 002D1991

Symbol: DUTY_30
   Definitions
      At line 46 in file main.s
   Uses
      At line 91 in file main.s
      At line 107 in file main.s

DUTY_50 004B2A9C

Symbol: DUTY_50
   Definitions
      At line 47 in file main.s
   Uses
      At line 99 in file main.s
Comment: DUTY_50 used once
DUTY_70 00693BA8

Symbol: DUTY_70
   Definitions
      At line 48 in file main.s
   Uses
      At line 88 in file main.s
      At line 110 in file main.s

DUTY_90 00874CB3

Symbol: DUTY_90
   Definitions
      At line 49 in file main.s
   Uses
      At line 121 in file main.s
      At line 129 in file main.s

GPIO_LOCK_KEY 4C4F434B

Symbol: GPIO_LOCK_KEY
   Definitions
      At line 42 in file main.s
   Uses
      None
Comment: GPIO_LOCK_KEY unused
GPIO_PORTE_AFSEL_R 40024420

Symbol: GPIO_PORTE_AFSEL_R
   Definitions
      At line 32 in file main.s
   Uses
      None



ARM Macro Assembler    Page 2 Alphabetic symbol ordering
Absolute symbols

Comment: GPIO_PORTE_AFSEL_R unused
GPIO_PORTE_DATA_R 400243FC

Symbol: GPIO_PORTE_DATA_R
   Definitions
      At line 30 in file main.s
   Uses
      At line 148 in file main.s
      At line 155 in file main.s

GPIO_PORTE_DEN_R 4002451C

Symbol: GPIO_PORTE_DEN_R
   Definitions
      At line 33 in file main.s
   Uses
      At line 77 in file main.s
Comment: GPIO_PORTE_DEN_R used once
GPIO_PORTE_DIR_R 40024400

Symbol: GPIO_PORTE_DIR_R
   Definitions
      At line 31 in file main.s
   Uses
      At line 72 in file main.s
Comment: GPIO_PORTE_DIR_R used once
GPIO_PORTF_AFSEL_R 40025420

Symbol: GPIO_PORTF_AFSEL_R
   Definitions
      At line 37 in file main.s
   Uses
      None
Comment: GPIO_PORTF_AFSEL_R unused
GPIO_PORTF_CR_R 40025524

Symbol: GPIO_PORTF_CR_R
   Definitions
      At line 41 in file main.s
   Uses
      None
Comment: GPIO_PORTF_CR_R unused
GPIO_PORTF_DATA_R 400253FC

Symbol: GPIO_PORTF_DATA_R
   Definitions
      At line 35 in file main.s
   Uses
      None
Comment: GPIO_PORTF_DATA_R unused
GPIO_PORTF_DEN_R 4002551C

Symbol: GPIO_PORTF_DEN_R
   Definitions
      At line 39 in file main.s
   Uses
      None
Comment: GPIO_PORTF_DEN_R unused
GPIO_PORTF_DIR_R 40025400



ARM Macro Assembler    Page 3 Alphabetic symbol ordering
Absolute symbols


Symbol: GPIO_PORTF_DIR_R
   Definitions
      At line 36 in file main.s
   Uses
      None
Comment: GPIO_PORTF_DIR_R unused
GPIO_PORTF_LOCK_R 40025520

Symbol: GPIO_PORTF_LOCK_R
   Definitions
      At line 40 in file main.s
   Uses
      None
Comment: GPIO_PORTF_LOCK_R unused
GPIO_PORTF_PUR_R 40025510

Symbol: GPIO_PORTF_PUR_R
   Definitions
      At line 38 in file main.s
   Uses
      None
Comment: GPIO_PORTF_PUR_R unused
SYSCTL_RCGCGPIO_R 400FE608

Symbol: SYSCTL_RCGCGPIO_R
   Definitions
      At line 43 in file main.s
   Uses
      At line 65 in file main.s
Comment: SYSCTL_RCGCGPIO_R used once
18 symbols



ARM Macro Assembler    Page 1 Alphabetic symbol ordering
External symbols

TExaS_Init 00000000

Symbol: TExaS_Init
   Definitions
      At line 51 in file main.s
   Uses
      At line 62 in file main.s
Comment: TExaS_Init used once
1 symbol
369 symbols in table
